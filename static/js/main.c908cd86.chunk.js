(this["webpackJsonpweek-progress"]=this["webpackJsonpweek-progress"]||[]).push([[0],{130:function(e,t,n){},131:function(e,t,n){},133:function(e){e.exports=JSON.parse('{"clientId":"1081935285404-2t3rjrjnu7gh4fepokh7fqg9jc5qd354.apps.googleusercontent.com","scope":"https://www.googleapis.com/auth/calendar","discoveryDocs":["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"]}')},142:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(44),r=n.n(s),o=(n(130),n(209)),c=(n(131),n(59)),l=n(95),h=n(50),d=n.n(h),u=n(79),g=n(39),p=n(40),v=n(77),b=n(75),f=n(223),j=n(218),k=n(229),m=n(230),O=n(227),x=n(231),C=n(232),w=n(228),y=n(221),S=n(133),E=new(function(){function e(){Object(g.a)(this,e),this.sign=!1,this.gapi=null,this.onLoadCallback=null,this.calendar="primary";try{this.updateSigninStatus=this.updateSigninStatus.bind(this),this.initClient=this.initClient.bind(this),this.handleSignoutClick=this.handleSignoutClick.bind(this),this.handleAuthClick=this.handleAuthClick.bind(this),this.createEvent=this.createEvent.bind(this),this.listUpcomingEvents=this.listUpcomingEvents.bind(this),this.listEvents=this.listEvents.bind(this),this.listCalendars=this.listCalendars.bind(this),this.createEventFromNow=this.createEventFromNow.bind(this),this.listenSign=this.listenSign.bind(this),this.onLoad=this.onLoad.bind(this),this.setCalendar=this.setCalendar.bind(this),this.updateEvent=this.updateEvent.bind(this),this.deleteEvent=this.deleteEvent.bind(this),this.getEvent=this.getEvent.bind(this),this.getBasicUserProfile=this.getBasicUserProfile.bind(this),this.handleClientLoad()}catch(t){console.log(t)}}return Object(p.a)(e,[{key:"updateSigninStatus",value:function(e){this.sign=e}},{key:"initClient",value:function(){var e=this;this.gapi=window.gapi,this.gapi.client.init(S).then((function(){e.gapi.auth2.getAuthInstance().isSignedIn.listen(e.updateSigninStatus),e.updateSigninStatus(e.gapi.auth2.getAuthInstance().isSignedIn.get()),e.onLoadCallback&&e.onLoadCallback()})).catch((function(e){console.log(e)}))}},{key:"handleClientLoad",value:function(){var e=this;this.gapi=window.gapi;var t=document.createElement("script");t.src="https://apis.google.com/js/api.js",document.body.appendChild(t),t.onload=function(){window.gapi.load("client:auth2",e.initClient)}}},{key:"handleAuthClick",value:function(){return this.gapi?this.gapi.auth2.getAuthInstance().signIn():(console.log("Error: this.gapi not loaded"),Promise.reject(new Error("Error: this.gapi not loaded")))}},{key:"setCalendar",value:function(e){this.calendar=e}},{key:"listenSign",value:function(e){this.gapi?this.gapi.auth2.getAuthInstance().isSignedIn.listen(e):console.log("Error: this.gapi not loaded")}},{key:"onLoad",value:function(e){this.gapi?e():this.onLoadCallback=e}},{key:"handleSignoutClick",value:function(){this.gapi?this.gapi.auth2.getAuthInstance().signOut():console.log("Error: this.gapi not loaded")}},{key:"listUpcomingEvents",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.calendar;return this.gapi?this.gapi.client.calendar.events.list({calendarId:t,timeMin:(new Date).toISOString(),showDeleted:!1,singleEvents:!0,maxResults:e,orderBy:"startTime"}):(console.log("Error: this.gapi not loaded"),!1)}},{key:"listEvents",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.calendar;if(this.gapi)return this.gapi.client.calendar.events.list(Object(c.a)({calendarId:t},e));throw Error("Error: this.gapi not loaded")}},{key:"listCalendars",value:function(e){if(this.gapi)return this.gapi.client.calendar.calendarList.list(Object(c.a)({},e));throw Error("Error: this.gapi not loaded")}},{key:"createEventFromNow",value:function(e){var t=e.time,n=e.summary,a=e.description,i=void 0===a?"":a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.calendar,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Europe/Paris",o={summary:n,description:i,start:{dateTime:(new Date).toISOString(),timeZone:r},end:{dateTime:new Date((new Date).getTime()+6e4*t),timeZone:r}};return this.createEvent(o,s)}},{key:"createEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.calendar,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none";return this.gapi?this.gapi.client.calendar.events.insert({calendarId:t,resource:e,sendUpdates:n}):(console.log("Error: this.gapi not loaded"),!1)}},{key:"deleteEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.calendar;return this.gapi?this.gapi.client.calendar.events.delete({calendarId:t,eventId:e}):(console.log("Error: gapi is not loaded use onLoad before please."),null)}},{key:"getBasicUserProfile",value:function(){return this.gapi?this.gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile():(console.log("Error: gapi is not loaded use onLoad before please."),null)}},{key:"updateEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.calendar,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";return this.gapi?this.gapi.client.calendar.events.patch({calendarId:n,eventId:t,resource:e,sendUpdates:a}):(console.log("Error: gapi is not loaded use onLoad before please."),null)}},{key:"getEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.calendar;return this.gapi?this.gapi.client.calendar.events.get({calendarId:t,eventId:e}):(console.log("Error: gapi is not loaded use onLoad before please."),null)}}]),e}()),D=n(80),I=n(81),L=n(96),P=n(194),W=n(48),T=n(222),A=n(217),B=n(214),U=n(216),F=n(212),N=n(211),M=n(207),q=n(210),J=n(208),G=n(1),H="primary",R=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(g.a)(this,n),(a=t.call(this,e)).state={sign:E.sign,events:[],doneThisWeek:0,plannedThisWeek:0,baseDate:new Date,loading:!0,calendar:H,calendars:[H]},E.onLoad((function(){E.listenSign((function(e){a.setState({sign:e})}))})),a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.fetchCalendars(),this.fetchData()}},{key:"fetchCalendars",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E.sign){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,E.listCalendars({});case 5:t=e.sent,n=t.result,console.log(n.items),this.setState({calendars:n.items}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,n,a,i,s,r,o,c,h,u,g,p,v;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E.sign){e.next=2;break}return e.abrupt("return");case 2:return this.setState({loading:!0}),t=new Date,e.prev=4,e.next=7,E.listEvents({timeMin:Object(D.a)(this.state.baseDate).toISOString(),timeMax:Object(I.a)(this.state.baseDate).toISOString(),showDeleted:!1,maxResults:10,calendarId:this.state.calendar,singleEvents:!0});case 7:if(n=e.sent,a=n.result,i=0,s=0,console.log(a.items),a.items){r=Object(l.a)(a.items);try{for(r.s();!(o=r.n()).done;)(c=o.value).start&&c.end&&(g=new Date(null===(h=c.start)||void 0===h?void 0:h.dateTime),p=new Date(null===(u=c.end)||void 0===u?void 0:u.dateTime),v=Object(L.a)(p,g),i+=v,p<t&&(s+=v))}catch(d){r.e(d)}finally{r.f()}}this.setState({plannedThisWeek:i,doneThisWeek:s,loading:!1}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),console.error(e.t0);case 19:case"end":return e.stop()}}),e,this,[[4,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"signIn",value:function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.handleAuthClick();case 3:return e.next=5,this.fetchCalendars();case 5:this.setState({sign:!0}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),this.setState({sign:!1});case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"setPreviousWeek",value:function(){var e=this;this.setState({baseDate:Object(P.a)(this.state.baseDate,7)},(function(){e.fetchData()}))}},{key:"setCurrentWeek",value:function(){var e=this;this.setState({baseDate:new Date},(function(){e.fetchData()}))}},{key:"setNextWeek",value:function(){var e=this;this.setState({baseDate:Object(W.a)(this.state.baseDate,7)},(function(){e.fetchData()}))}},{key:"handleCalendarChange",value:function(e){var t=this;this.setState({calendar:e.target.value},(function(){t.fetchData()}))}},{key:"render",value:function(){var e=this;return Object(G.jsxs)(T.a,{sx:{width:"100%",maxWidth:500,margin:"auto",padding:4},children:[Object(G.jsx)(f.a,{variant:"h3",component:"div",gutterBottom:!0,children:"Week Progress"}),this.state.sign?Object(G.jsxs)("div",{children:[Object(G.jsx)(T.a,{sx:{minWidth:120,marginBottom:2},children:Object(G.jsxs)(U.a,{fullWidth:!0,children:[Object(G.jsx)(A.a,{id:"demo-simple-select-label",children:"Pick the calendar"}),Object(G.jsx)(F.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:this.state.calendar,label:"Pick the calendar",onChange:function(t){return e.handleCalendarChange(t)},children:this.state.calendars.map((function(e){return Object(G.jsx)(B.a,{value:e.id,children:e.summary})}))}),Object(G.jsx)(T.a,{marginBottom:2}),Object(G.jsx)(M.b,{dateAdapter:N.a,children:Object(G.jsx)(q.a,{label:"Pick any date",value:this.state.baseDate,onChange:function(t){e.setState({baseDate:new Date(t)})},renderInput:function(e){return Object(G.jsx)(j.a,Object(c.a)({},e))}})})]})}),Object(G.jsxs)(k.a,{children:[Object(G.jsx)(m.a,{action:Object(G.jsx)(O.a,{"aria-label":"settings",onClick:function(){return e.fetchData()},children:Object(G.jsx)(J.a,{})}),title:"Timesheet",subheader:"Week starting on "+Object(D.a)(this.state.baseDate).toLocaleDateString("en-us")}),Object(G.jsx)(x.a,{children:Object(G.jsxs)(f.a,{variant:"body2",children:["Planned this week: ",this.state.loading?"-":this.state.plannedThisWeek/60," hours",Object(G.jsx)("br",{}),"So far: ",this.state.loading?"-":this.state.doneThisWeek/60," hours"]})}),Object(G.jsxs)(C.a,{children:[Object(G.jsx)(w.a,{onClick:function(){return e.setPreviousWeek()},children:"Previous"}),Object(G.jsx)(w.a,{onClick:function(){return e.setCurrentWeek()},children:"Current"}),Object(G.jsx)(w.a,{onClick:function(){return e.setNextWeek()},children:"Next"})]})]})]}):Object(G.jsx)(w.a,{variant:"contained",onClick:function(){return e.signIn()},children:"Sign in with Google"}),Object(G.jsxs)(f.a,{variant:"caption",component:"div",paddingTop:4,gutterBottom:!0,children:["Hosted (code + bundle) on ",Object(G.jsx)(y.a,{href:"https://github.com/pierremtb/week-progress",children:"GitHub"})," \ud83d\udc9b.",Object(G.jsx)("br",{}),"Copyright \xa9 2021 ",Object(G.jsx)(y.a,{href:"https://pierrejacquier.com",children:"Pierre Jacquier"}),"."]})]})}}]),n}(i.a.Component);var Z=function(){return Object(G.jsxs)(i.a.Fragment,{children:[Object(G.jsx)(o.a,{}),Object(G.jsx)(R,{})]})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,234)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),s(e),r(e)}))};r.a.render(Object(G.jsx)(i.a.StrictMode,{children:Object(G.jsx)(Z,{})}),document.getElementById("root")),z()}},[[142,1,2]]]);
//# sourceMappingURL=main.c908cd86.chunk.js.map