(this["webpackJsonpweek-progress"]=this["webpackJsonpweek-progress"]||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),s=n(33),r=n.n(s),o=(n(89),n(149)),l=(n(90),n(67)),c=n(36),h=n.n(c),d=n(54),u=n(38),g=n(39),p=n(74),v=n(73),f=n(158),b=n(62),k=n(92),j=new(function(){function e(){Object(u.a)(this,e),this.sign=!1,this.gapi=null,this.onLoadCallback=null,this.calendar="primary";try{this.updateSigninStatus=this.updateSigninStatus.bind(this),this.initClient=this.initClient.bind(this),this.handleSignoutClick=this.handleSignoutClick.bind(this),this.handleAuthClick=this.handleAuthClick.bind(this),this.createEvent=this.createEvent.bind(this),this.listUpcomingEvents=this.listUpcomingEvents.bind(this),this.listEvents=this.listEvents.bind(this),this.listCalendars=this.listCalendars.bind(this),this.createEventFromNow=this.createEventFromNow.bind(this),this.listenSign=this.listenSign.bind(this),this.onLoad=this.onLoad.bind(this),this.setCalendar=this.setCalendar.bind(this),this.updateEvent=this.updateEvent.bind(this),this.deleteEvent=this.deleteEvent.bind(this),this.getEvent=this.getEvent.bind(this),this.getBasicUserProfile=this.getBasicUserProfile.bind(this),this.handleClientLoad()}catch(t){console.log(t)}}return Object(g.a)(e,[{key:"updateSigninStatus",value:function(e){this.sign=e}},{key:"initClient",value:function(){var e=this;this.gapi=window.gapi,this.gapi.client.init(k).then((function(){e.gapi.auth2.getAuthInstance().isSignedIn.listen(e.updateSigninStatus),e.updateSigninStatus(e.gapi.auth2.getAuthInstance().isSignedIn.get()),e.onLoadCallback&&e.onLoadCallback()})).catch((function(e){console.log(e)}))}},{key:"handleClientLoad",value:function(){var e=this;this.gapi=window.gapi;var t=document.createElement("script");t.src="https://apis.google.com/js/api.js",document.body.appendChild(t),t.onload=function(){window.gapi.load("client:auth2",e.initClient)}}},{key:"handleAuthClick",value:function(){return this.gapi?this.gapi.auth2.getAuthInstance().signIn():(console.log("Error: this.gapi not loaded"),Promise.reject(new Error("Error: this.gapi not loaded")))}},{key:"setCalendar",value:function(e){this.calendar=e}},{key:"listenSign",value:function(e){this.gapi?this.gapi.auth2.getAuthInstance().isSignedIn.listen(e):console.log("Error: this.gapi not loaded")}},{key:"onLoad",value:function(e){this.gapi?e():this.onLoadCallback=e}},{key:"handleSignoutClick",value:function(){this.gapi?this.gapi.auth2.getAuthInstance().signOut():console.log("Error: this.gapi not loaded")}},{key:"listUpcomingEvents",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.calendar;return this.gapi?this.gapi.client.calendar.events.list({calendarId:t,timeMin:(new Date).toISOString(),showDeleted:!1,singleEvents:!0,maxResults:e,orderBy:"startTime"}):(console.log("Error: this.gapi not loaded"),!1)}},{key:"listEvents",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.calendar;if(this.gapi)return this.gapi.client.calendar.events.list(Object(b.a)({calendarId:t},e));throw Error("Error: this.gapi not loaded")}},{key:"listCalendars",value:function(e){if(this.gapi)return this.gapi.client.calendar.calendarList.list(Object(b.a)({},e));throw Error("Error: this.gapi not loaded")}},{key:"createEventFromNow",value:function(e){var t=e.time,n=e.summary,i=e.description,a=void 0===i?"":i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.calendar,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Europe/Paris",o={summary:n,description:a,start:{dateTime:(new Date).toISOString(),timeZone:r},end:{dateTime:new Date((new Date).getTime()+6e4*t),timeZone:r}};return this.createEvent(o,s)}},{key:"createEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.calendar,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none";return this.gapi?this.gapi.client.calendar.events.insert({calendarId:t,resource:e,sendUpdates:n}):(console.log("Error: this.gapi not loaded"),!1)}},{key:"deleteEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.calendar;return this.gapi?this.gapi.client.calendar.events.delete({calendarId:t,eventId:e}):(console.log("Error: gapi is not loaded use onLoad before please."),null)}},{key:"getBasicUserProfile",value:function(){return this.gapi?this.gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile():(console.log("Error: gapi is not loaded use onLoad before please."),null)}},{key:"updateEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.calendar,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";return this.gapi?this.gapi.client.calendar.events.patch({calendarId:n,eventId:t,resource:e,sendUpdates:i}):(console.log("Error: gapi is not loaded use onLoad before please."),null)}},{key:"getEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.calendar;return this.gapi?this.gapi.client.calendar.events.get({calendarId:t,eventId:e}):(console.log("Error: gapi is not loaded use onLoad before please."),null)}}]),e}()),m=n(141),C=n(142),w=n(157),E=n(143),O=n(68),S=n(156),y=n(154),x=n(152),D=n(153),I=n(150),L=n(2),W="primary",T=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).state={sign:j.sign,events:[],doneThisWeek:0,plannedThisWeek:0,baseDate:new Date,loading:!0,calendar:W,calendars:[W]},j.onLoad((function(){j.listenSign((function(e){i.setState({sign:e})}))})),i}return Object(g.a)(n,[{key:"componentDidMount",value:function(){this.fetchCalendars(),this.fetchData()}},{key:"fetchCalendars",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j.sign){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,j.listCalendars({});case 5:t=e.sent,n=t.result,console.log(n.items),this.setState({calendars:n.items}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,n,i,a,s,r,o,c,d,u,g,p,v;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j.sign){e.next=2;break}return e.abrupt("return");case 2:return this.setState({loading:!0}),t=new Date,e.prev=4,e.next=7,j.listEvents({timeMin:Object(m.a)(this.state.baseDate).toISOString(),timeMax:Object(C.a)(this.state.baseDate).toISOString(),showDeleted:!1,maxResults:10,calendarId:this.state.calendar,singleEvents:!0});case 7:if(n=e.sent,i=n.result,a=0,s=0,console.log(i.items),i.items){r=Object(l.a)(i.items);try{for(r.s();!(o=r.n()).done;)(c=o.value).start&&c.end&&(g=new Date(null===(d=c.start)||void 0===d?void 0:d.dateTime),p=new Date(null===(u=c.end)||void 0===u?void 0:u.dateTime),v=Object(w.a)(p,g),a+=v,p<t&&(s+=v))}catch(h){r.e(h)}finally{r.f()}}this.setState({plannedThisWeek:a,doneThisWeek:s,loading:!1}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),console.error(e.t0);case 19:case"end":return e.stop()}}),e,this,[[4,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"signIn",value:function(){var e=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.handleAuthClick();case 3:return e.next=5,this.fetchCalendars();case 5:this.setState({sign:!0}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),this.setState({sign:!1});case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"setPreviousWeek",value:function(){var e=this;this.setState({baseDate:Object(E.a)(this.state.baseDate,7)},(function(){e.fetchData()}))}},{key:"setCurrentWeek",value:function(){var e=this;this.setState({baseDate:new Date},(function(){e.fetchData()}))}},{key:"setNextWeek",value:function(){var e=this;this.setState({baseDate:Object(O.a)(this.state.baseDate,7)},(function(){e.fetchData()}))}},{key:"handleCalendarChange",value:function(e){var t=this;this.setState({calendar:e.target.value},(function(){t.fetchData()}))}},{key:"render",value:function(){var e=this;return Object(L.jsx)(S.a,{padding:4,children:this.state.sign?Object(L.jsxs)("div",{children:[Object(L.jsx)(S.a,{sx:{minWidth:120},children:Object(L.jsxs)(D.a,{fullWidth:!0,children:[Object(L.jsx)(y.a,{id:"demo-simple-select-label",children:"Calendar"}),Object(L.jsx)(I.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:this.state.calendar,label:"Calendar",onChange:function(t){return e.handleCalendarChange(t)},children:this.state.calendars.map((function(e){return Object(L.jsx)(x.a,{value:e.id,children:e.summary})}))})]})}),Object(L.jsxs)("p",{children:["Week: ",Object(m.a)(this.state.baseDate).toLocaleDateString("en-us")]}),Object(L.jsxs)("p",{children:["Done this week: ",this.state.loading?"-":this.state.doneThisWeek/60," hours"]}),Object(L.jsxs)("p",{children:["Planned this week: ",this.state.loading?"-":this.state.plannedThisWeek/60," hours"]}),Object(L.jsx)(f.a,{onClick:function(){return e.setPreviousWeek()},children:"Previous"}),Object(L.jsx)(f.a,{onClick:function(){return e.setCurrentWeek()},children:"Current"}),Object(L.jsx)(f.a,{onClick:function(){return e.setNextWeek()},children:"Next"})]}):Object(L.jsx)(f.a,{variant:"contained",onClick:function(){return e.signIn()},children:"Sign in with Google"})})}}]),n}(a.a.Component);var P=function(){return Object(L.jsxs)(a.a.Fragment,{children:[Object(L.jsx)(o.a,{}),Object(L.jsx)(T,{})]})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,159)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),s(e),r(e)}))};r.a.render(Object(L.jsx)(a.a.StrictMode,{children:Object(L.jsx)(P,{})}),document.getElementById("root")),A()},89:function(e,t,n){},90:function(e,t,n){},92:function(e){e.exports=JSON.parse('{"clientId":"1081935285404-2t3rjrjnu7gh4fepokh7fqg9jc5qd354.apps.googleusercontent.com","scope":"https://www.googleapis.com/auth/calendar","discoveryDocs":["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"]}')}},[[101,1,2]]]);
//# sourceMappingURL=main.16bd548e.chunk.js.map